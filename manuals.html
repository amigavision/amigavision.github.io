<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Manual Redirect</title>
<script>
window.onload = function() {
  const urlParams = new URLSearchParams(window.location.search);
  const number = parseInt(urlParams.keys().next().value, 10);

  if (!isNaN(number) && number > 0) {
    const bucketStart = Math.floor((number - 1) / 100) * 100 + 1;
    const bucketEnd = bucketStart + 99;
    const directory = `${bucketStart.toString().padStart(4, '0')}-${bucketEnd.toString().padStart(4, '0')}`;
    const vParam = Math.floor(Math.random() * 4000) + 1000; // random v parameter between 1000 and 5000
    const redirectUrl = `https://amiga.abime.net/manual/${directory}/${number}_manual0.pdf?v=${vParam}`;

    window.location.href = redirectUrl;
  } else {
    document.body.innerHTML = '<h1>Invalid number in URL</h1>';
  }
};
</script>
</head>
<body>
<h1>Redirecting to manual...</h1>
</body>
</html>